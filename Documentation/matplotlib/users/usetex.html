
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Text rendering With LaTeX &mdash; Matplotlib 1.3.1 documentation</title>
    <link rel="stylesheet" href="../_static/pythonista.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 1.3.1 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="top" title="Matplotlib 1.3.1 documentation" href="../index.html" />
    <link rel="up" title="Working with text" href="index_text.html" />
    <link rel="next" title="Annotating text" href="annotations_intro.html" />
    <link rel="prev" title="Typesetting With XeLaTeX/LuaLaTeX" href="pgf.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="stylesheet" href="../_static/pythonista.css" type="text/css" />
    <meta name = "viewport" content = "width=device-width,initial-scale=1.0,user-scalable=no;">
    
    <script type="text/javascript">
        var getTextForSample = function(i) {
            codeBlock = document.getElementsByClassName('highlight-python')[i];
            return codeBlock.innerText;
        }
        
        var copySample = function (i) {
            window.location.href = '/__pythonista_copy__/' + encodeURI(getTextForSample(i));
        }
        
        var openSample = function (i) {
            window.location.href = '/__pythonista_open__/' + encodeURI(getTextForSample(i));
        }
        
        //Source: http://ejohn.org/blog/partial-functions-in-javascript/
        Function.prototype.partial = function() {
        	var fn = this,
        		args = Array.prototype.slice.call(arguments);
        	return function() {
        		var arg = 0;
        		for (var i = 0; i < args.length && arg < arguments.length; i++)
        		if (args[i] === undefined) args[i] = arguments[arg++];
        		return fn.apply(this, args);
        	};
        };
        
        window.onload=function() {
            //Add "Copy" and "Open in Editor" buttons for code samples:
            var inApp = navigator.userAgent.match(/AppleWebKit/i) != null && navigator.userAgent.match(/Safari/i) == null;
            if (inApp) {
                codeBlocks = document.getElementsByClassName('highlight-python');
                for (var i = 0; i < codeBlocks.length; i++) {
                    codeBlock = codeBlocks[i];
                    if (codeBlock.innerText.indexOf('>>>') == 0) {
                        //Don't add header for interactive sessions
                        continue;
                    }

                    var codeHeader = document.createElement('div');
                    codeHeader.className = 'pythonista-code-header';

                    var copyButton = document.createElement('button');
                    copyButton.className = 'pythonista-button';
                    copyButton.innerText = 'Copy';
                    copyButton.addEventListener('click', copySample.partial(i));
                    codeHeader.appendChild(copyButton);

                    var openButton = document.createElement('button');
                    openButton.className = 'pythonista-button';
                    openButton.innerText = 'Open in Editor';
                    openButton.addEventListener('click', openSample.partial(i));
                    codeHeader.appendChild(openButton);

                    codeBlock.parentElement.insertBefore(codeHeader, codeBlock);
                }
            }
        }
    </script>
    
 

  </head>
  <body ontouchstart="">
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="annotations_intro.html" title="Annotating text"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pgf.html" title="Typesetting With XeLaTeX/LuaLaTeX"
             accesskey="P">previous</a> |</li>
        <li><a href="http://omz-software.com/pythonista"><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -4px; margin-right: 4px;"/></a></li>
        <li><a href="../index.html">Matplotlib 1.3.1 documentation</a> &raquo;</li>

          <li><a href="index.html" >User&#8217;s Guide</a> &raquo;</li>
          <li><a href="index_text.html" accesskey="U">Working with text</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="text-rendering-with-latex">
<span id="usetex-tutorial"></span><h1>Text rendering With LaTeX<a class="headerlink" href="#text-rendering-with-latex" title="Permalink to this headline">Â¶</a></h1>
<p>Matplotlib has the option to use LaTeX to manage all text layout.  This
option is available with the following backends:</p>
<ul class="simple">
<li>Agg</li>
<li>PS</li>
<li>PDF</li>
</ul>
<p>The LaTeX option is activated by setting <tt class="docutils literal"><span class="pre">text.usetex</span> <span class="pre">:</span> <span class="pre">True</span></tt> in
your rc settings.  Text handling with matplotlib&#8217;s LaTeX support is
slower than matplotlib&#8217;s very capable <a class="reference internal" href="mathtext.html#mathtext-tutorial"><em>mathtext</em></a>, but is more flexible, since different LaTeX
packages (font packages, math packages, etc.)  can be used. The
results can be striking, especially when you take care to use the same
fonts in your figures as in the main document.</p>
<p>Matplotlib&#8217;s LaTeX support requires a working <a class="reference external" href="http://www.tug.org">LaTeX</a> installation, <a class="reference external" href="http://sourceforge.net/projects/dvipng">dvipng</a>
(which may be included with your LaTeX installation), and <a class="reference external" href="http://www.cs.wisc.edu/~ghost/">Ghostscript</a>
(GPL Ghostscript 8.60 or later is recommended). The executables for these
external dependencies must all be located on your <span class="target" id="index-0"></span><a class="reference internal" href="../faq/environment_variables_faq.html#envvar-PATH"><tt class="xref std std-envvar docutils literal"><span class="pre">PATH</span></tt></a>.</p>
<p>There are a couple of options to mention, which can be changed using <a class="reference internal" href="customizing.html#customizing-matplotlib"><em>rc
settings</em></a>. Here is an example matplotlibrc file:</p>
<div class="highlight-python"><div class="highlight"><pre>font.family        : serif
font.serif         : Times, Palatino, New Century Schoolbook, Bookman, Computer Modern Roman
font.sans-serif    : Helvetica, Avant Garde, Computer Modern Sans serif
font.cursive       : Zapf Chancery
font.monospace     : Courier, Computer Modern Typewriter

text.usetex        : true
</pre></div>
</div>
<p>The first valid font in each family is the one that will be loaded. If the
fonts are not specified, the Computer Modern fonts are used by default. All of
the other fonts are Adobe fonts. Times and Palatino each have their own
accompanying math fonts, while the other Adobe serif fonts make use of the
Computer Modern math fonts. See the <a class="reference external" href="http://www.ctan.org/tex-archive/macros/latex/required/psnfss/psnfss2e.pdf">PSNFSS</a> documentation for more details.</p>
<p>To use LaTeX and select Helvetica as the default font, without editing
matplotlibrc use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rc</span>
<span class="n">rc</span><span class="p">(</span><span class="s">&#39;font&#39;</span><span class="p">,</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;family&#39;</span><span class="p">:</span><span class="s">&#39;sans-serif&#39;</span><span class="p">,</span><span class="s">&#39;sans-serif&#39;</span><span class="p">:[</span><span class="s">&#39;Helvetica&#39;</span><span class="p">]})</span>
<span class="c">## for Palatino and other serif fonts use:</span>
<span class="c">#rc(&#39;font&#39;,**{&#39;family&#39;:&#39;serif&#39;,&#39;serif&#39;:[&#39;Palatino&#39;]})</span>
<span class="n">rc</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="n">usetex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is the standard example, <tt class="xref py py-obj docutils literal"><span class="pre">tex_demo.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Demo of TeX rendering.</span>

<span class="sd">You can use TeX to render all of your matplotlib text if the rc</span>
<span class="sd">parameter text.usetex is set.  This works currently on the agg and ps</span>
<span class="sd">backends, and requires that you have tex and the other dependencies</span>
<span class="sd">described at http://matplotlib.sf.net/matplotlib.texmanager.html</span>
<span class="sd">properly installed on your system.  The first time you run a script</span>
<span class="sd">you will see a lot of output from tex and associated tools.  The next</span>
<span class="sd">time, the run may be silent, as a lot of the information is cached in</span>
<span class="sd">~/.tex.cache</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>


<span class="c"># Example data</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="n">usetex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;font&#39;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s">&#39;serif&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">r&#39;\textbf{time} (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">r&#39;\textit{voltage} (mV)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">r&quot;\TeX\ is Number &quot;</span>
          <span class="s">r&quot;$\displaystyle\sum_{n=1}^\infty\frac{-e^{i\pi}}{2^n}$!&quot;</span><span class="p">,</span>
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;gray&#39;</span><span class="p">)</span>
<span class="c"># Make room for the ridiculously large title.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;tex_demo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../pyplots/tex_demo.py">Source code</a>, <a class="reference external" href="../pyplots/tex_demo.png">png</a>)</p>
<div class="figure">
<img alt="../_images/tex_demo1.png" src="../_images/tex_demo1.png" />
</div>
<p>Note that display math mode (<tt class="docutils literal"><span class="pre">$$</span> <span class="pre">e=mc^2</span> <span class="pre">$$</span></tt>) is  not supported, but adding the
command <tt class="docutils literal"><span class="pre">\displaystyle</span></tt>, as in <tt class="xref py py-obj docutils literal"><span class="pre">tex_demo.py</span></tt>, will produce the same
results.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Certain characters require special escaping in TeX, such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># $ % &amp; ~ _ ^ \ { } \( \) \[ \]</span>
</pre></div>
</div>
<p class="last">Therefore, these characters will behave differently depending on
the rcParam <tt class="docutils literal"><span class="pre">text.usetex</span></tt> flag.</p>
</div>
<div class="section" id="usetex-with-unicode">
<span id="usetex-unicode"></span><h2>usetex with unicode<a class="headerlink" href="#usetex-with-unicode" title="Permalink to this headline">Â¶</a></h2>
<p>It is also possible to use unicode strings with the LaTeX text manager, here is
an example taken from <tt class="xref py py-obj docutils literal"><span class="pre">tex_unicode_demo.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This demo is tex_demo.py modified to have unicode. See that file for</span>
<span class="sd">more information.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;text.usetex&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;text.latex.unicode&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">arange</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span>
     <span class="n">grid</span><span class="p">,</span> <span class="n">savefig</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>

<span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">+</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span>
<span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="n">xlabel</span><span class="p">(</span><span class="s">r&#39;\textbf{time (s)}&#39;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s">r&#39;\textit{Velocity (\u00B0/sec)}&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">title</span><span class="p">(</span><span class="s">r&quot;\TeX\ is Number $\displaystyle\sum_{n=1}^\infty\frac{-e^{i\pi}}{2^n}$!&quot;</span><span class="p">,</span>
      <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../mpl_examples/pylab_examples/tex_unicode_demo.py">Source code</a>, <a class="reference external" href="../mpl_examples/pylab_examples/tex_unicode_demo.png">png</a>)</p>
<div class="figure">
<img alt="../_images/tex_unicode_demo.png" src="../_images/tex_unicode_demo.png" />
</div>
</div>
<div class="section" id="postscript-options">
<span id="usetex-postscript"></span><h2>Postscript options<a class="headerlink" href="#postscript-options" title="Permalink to this headline">Â¶</a></h2>
<p>In order to produce encapsulated postscript files that can be embedded in a new
LaTeX document, the default behavior of matplotlib is to distill the output,
which removes some postscript operators used by LaTeX that are illegal in an
eps file. This step produces results which may be unacceptable to some users,
because the text is coarsely rasterized and converted to bitmaps, which are not
scalable like standard postscript, and the text is not searchable. One
workaround is to to set <tt class="docutils literal"><span class="pre">ps.distiller.res</span></tt> to a higher value (perhaps 6000)
in your rc settings, which will produce larger files but may look better and
scale reasonably. A better workaround, which requires <a class="reference external" href="http://poppler.freedesktop.org/">Poppler</a> or <a class="reference external" href="http://www.foolabs.com/xpdf">Xpdf</a>, can be
activated by changing the <tt class="docutils literal"><span class="pre">ps.usedistiller</span></tt> rc setting to <tt class="docutils literal"><span class="pre">xpdf</span></tt>. This
alternative produces postscript without rasterizing text, so it scales
properly, can be edited in Adobe Illustrator, and searched text in pdf
documents.</p>
</div>
<div class="section" id="possible-hangups">
<span id="usetex-hangups"></span><h2>Possible hangups<a class="headerlink" href="#possible-hangups" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>On Windows, the <span class="target" id="index-1"></span><a class="reference internal" href="../faq/environment_variables_faq.html#envvar-PATH"><tt class="xref std std-envvar docutils literal"><span class="pre">PATH</span></tt></a> environment variable may need to be modified
to include the directories containing the latex, dvipng and ghostscript
executables. See <a class="reference internal" href="../faq/environment_variables_faq.html#environment-variables"><em>Environment Variables</em></a> and
<a class="reference internal" href="../faq/environment_variables_faq.html#setting-windows-environment-variables"><em>Setting environment variables in windows</em></a> for details.</li>
<li>Using MiKTeX with Computer Modern fonts, if you get odd *Agg and PNG
results, go to MiKTeX/Options and update your format files</li>
<li>The fonts look terrible on screen. You are probably running Mac OS, and there
is some funny business with older versions of dvipng on the mac. Set
<tt class="docutils literal"><span class="pre">text.dvipnghack</span> <span class="pre">:</span> <span class="pre">True</span></tt> in your matplotlibrc file.</li>
<li>On Ubuntu and Gentoo, the base texlive install does not ship with
the type1cm package. You may need to install some of the extra
packages to get all the goodies that come bundled with other latex
distributions.</li>
<li>Some progress has been made so matplotlib uses the dvi files
directly for text layout. This allows latex to be used for text
layout with the pdf and svg backends, as well as the *Agg and PS
backends. In the future, a latex installation may be the only
external dependency.</li>
</ul>
</div>
<div class="section" id="troubleshooting">
<span id="usetex-troubleshooting"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>Try deleting your <tt class="file docutils literal"><span class="pre">.matplotlib/tex.cache</span></tt> directory. If you don&#8217;t know
where to find <tt class="file docutils literal"><span class="pre">.matplotlib</span></tt>, see <a class="reference internal" href="../faq/troubleshooting_faq.html#locating-matplotlib-config-dir"><em>.matplotlib directory location</em></a>.</li>
<li>Make sure LaTeX, dvipng and ghostscript are each working and on your
<span class="target" id="index-2"></span><a class="reference internal" href="../faq/environment_variables_faq.html#envvar-PATH"><tt class="xref std std-envvar docutils literal"><span class="pre">PATH</span></tt></a>.</li>
<li>Make sure what you are trying to do is possible in a LaTeX document,
that your LaTeX syntax is valid and that you are using raw strings
if necessary to avoid unintended escape sequences.</li>
<li>Most problems reported on the mailing list have been cleared up by
upgrading <a class="reference external" href="http://www.cs.wisc.edu/~ghost/">Ghostscript</a>. If possible, please try upgrading to the
latest release before reporting problems to the list.</li>
<li>The <tt class="docutils literal"><span class="pre">text.latex.preamble</span></tt> rc setting is not officially supported. This
option provides lots of flexibility, and lots of ways to cause
problems. Please disable this option before reporting problems to
the mailing list.</li>
<li>If you still need help, please see <a class="reference internal" href="../faq/troubleshooting_faq.html#reporting-problems"><em>Getting help</em></a></li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2013 The matplotlib development team.
    <br />
    The Python Software Foundation is a non-profit corporation.  
    <a href="http://www.python.org/psf/donations/">Please donate.</a>
    <br />
    Last updated on May 03, 2016.
    <a href="../bugs.html">Found a bug</a>?
    <br />
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
    </div>

  </body>
</html>